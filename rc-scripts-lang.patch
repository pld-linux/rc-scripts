Index: lang.sh
===================================================================
--- lang.sh	(wersja 9133)
+++ lang.sh	(wersja 9134)
@@ -4,8 +4,45 @@
 #
 
 if [ -f /etc/sysconfig/i18n ]; then
+	ORG_LANG="$LANG"
+	ORG_LC_ADDRESS="$LC_ADDRESS"
+	ORG_LC_COLLATE="$LC_COLLATE"
+	ORG_LC_CTYPE="$LC_CTYPE"
+	ORG_LC_IDENTIFICATION="$LC_IDENTIFICATION"
+	ORG_LC_MEASUREMENT="$LC_MEASUREMENT"
+	ORG_LC_MESSAGES="$LC_MESSAGES"
+	ORG_LC_MONETARY="$LC_MONETARY"
+	ORG_LC_NAME="$LC_NAME"
+	ORG_LC_NUMERIC="$LC_NUMERIC"
+	ORG_LC_PAPER="$LC_PAPER"
+	ORG_LC_TELEPHONE="$LC_TELEPHONE"
+	ORG_LC_TIME="$LC_TIME"
+	ORG_LC_ALL="$LC_ALL"
+
 	. /etc/sysconfig/i18n
 
+	# we prefer session settings (that came from ssh for example)
+	# instead of system one
+
+	LANG=${ORG_LANG:-${LANG}}
+	LC_ADDRESS=${ORG_LC_ADDRESS:-${LC_ADDRESS}}
+	LC_COLLATE=${ORG_LC_COLLATE:-${LC_COLLATE}}
+	LC_CTYPE=${ORG_LC_CTYPE:-${LC_CTYPE}}
+	LC_IDENTIFICATION=${ORG_LC_IDENTIFICATION:-${LC_IDENTIFICATION}}
+	LC_MEASUREMENT=${ORG_LC_MEASUREMENT:-${LC_MEASUREMENT}}
+	LC_MESSAGES=${ORG_LC_MESSAGES:-${LC_MESSAGES}}
+	LC_MONETARY=${ORG_LC_MONETARY:-${LC_MONETARY}}
+	LC_NAME=${ORG_LC_NAME:-${LC_NAME}}
+	LC_NUMERIC=${ORG_LC_NUMERIC:-${LC_NUMERIC}}
+	LC_PAPER=${ORG_LC_PAPER:-${LC_PAPER}}
+	LC_TELEPHONE=${ORG_LC_TELEPHONE:-${LC_TELEPHONE}}
+	LC_TIME=${ORG_LC_TIME:-${LC_TIME}}
+	LC_ALL=${LC_ALL:-${LC_ALL}}
+
+	unset ORG_LANG ORG_LC_ADDRESS ORG_LC_COLLATE ORG_LC_CTYPE ORG_LC_IDENTIFICATION ORG_LC_MEASUREMENT
+	unset ORG_LC_MESSAGES ORG_LC_MONETARY ORG_LC_NAME ORG_LC_NUMERIC ORG_LC_PAPER ORG_LC_TELEPHONE
+	unset ORG_LC_TIME ORG_LC_ALL
+
 	[ -n "$LANG" ] && export LANG || unset LANG
 	[ -n "$LC_ADDRESS" ] && export LC_ADDRESS || unset LC_ADDRESS
 	[ -n "$LC_COLLATE" ] && export LC_COLLATE || unset LC_COLLATE
@@ -25,11 +62,6 @@
 
 	[ -n "$_XKB_CHARSET" ] && export _XKB_CHARSET || unset _XKB_CHARSET
 
-	# deprecated
-	if [ -n "$SYSTERM" ]; then
-		export TERM=$SYSTERM
-	fi
-
 	if [ -n "$INPUTRC" ]; then
 		export INPUTRC
 	fi
@@ -41,6 +73,3 @@
 		export LESSCHARSET
 	fi
 fi
-
-# This must be last line !
-# vi:syntax=sh
