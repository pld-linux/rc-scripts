diff --git a/lib/functions b/lib/functions
index 8d018f7..501cac9 100644
--- a/lib/functions
+++ b/lib/functions
@@ -1009,7 +1009,7 @@ pidofproc() {
 	fi
 
 	# Next try "pidof" if pidfile is not specified
-	if [ -z "$pid" ] && [ -z "$pidfile" ]; then
+	if [ -z "$pid" ] && [ -z "$2" ]; then
 		pid=$(pidof -o $$ -o $PPID -o %PPID -x "$1")
 	fi
 
